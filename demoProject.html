<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Welcome Registration</title>
    <link href="../CSS/register.css" rel="stylesheet">
</head>

<body>
    <div class="form-div">
        <div class="reg-content">
            <h1>Welcome Registration</h1>
            <span>Have an accountï¼Ÿ</span> <a href="#">Registration</a>
        </div>
        <form id="reg-form" action="#" method="get">
            <table>
                <tr>
                    <td>Username</td>
                    <td class="inputs">
                        <input name="username" type="text" id="username">
                        <br>
                        <span id="username_err" class="err_msg" style="display: none">Illegal Username</span>
                    </td>
                </tr>

                <tr>
                    <td>Password</td>
                    <td class="inputs">
                        <input name="password" type="password" id="password">
                        <br>
                        <span id="password_err" class="err_msg" style="display: none">Wrong length</span>
                    </td>
                </tr>

                <tr>
                    <td>Telephone Number</td>
                    <td class="inputs"><input name="tel" type="text" id="tel">
                        <br>
                        <span id="tel_err" class="err_msg" style="display: none">Wrong num Format</span>
                    </td>
                </tr>
            </table>
            <div class="buttons">
                <input value="Registration" type="submit" id="reg_btn">
            </div>
            <br class="clear">
        </form>

    </div>


    <script>


        // 1.1Get the input of username input
        var usernameInput = document.getElementById("username");

        //1.2 Connect the onblur case 
        usernameInput.onblur = checkUsername;
        function checkUsername() {
            // 1.3 Get user inputed username
            var username = usernameInput.value.trim();


            //var flag = username.length >= 6 && username.length <= 12;
            // 1.4 Check whether the user input text follow the requirement: len 6~12 
            var reg = /^\w{6,12}$/;
            var flag = reg.test(username);
            if (flag) {
                alert(flag)
                // Yes, followed the rule
                document.getElementById("username_err").style.display = 'none';

            } else {
                // No, not follow the rule, display the wrong input message
                document.getElementById("username_err").style.display = '';
            }

            return flag;
        }








        // 1.1Get the input of password input
        var passwordInput = document.getElementById("password");

        //1.2 Connect the onblur case
        passwordInput.onblur = checkPassword();

        function checkPassword() {
            // 1.3 Get user inputed password
            var password = passwordInput.value.trim();


            //var flag = password.length >= 6 && password.length <= 12;
            // 1.4 Check whether the user input text follow the requirement: len 6~12
            // input is made of letter and number, using regular expression
            var reg = /^\w{6,12}$/;
            var flag = reg.test(password);
            if (flag) {
                alert(flag)
                // Yes, followed the rule
                document.getElementById("password_err").style.display = 'none';

            } else {
                // No, not follow the rule, display the wrong input message
                document.getElementById("password_err").style.display = '';
            }

            return falg;

        }



        // 1.1Get the input of tel input
        var telInput = document.getElementById("tel");

        //1.2 Connect the onblur case
        telInput.onblur = checkTel();
        function checkTel() {
            // 1.3 Get user inputed tel
            var tel = telInput.value.trim();


            //var flag = tel.length == 11
            // 1.4 Check whether the user input text follow the requirement: len 6~12
            var reg = /^[1]\d{10}$/;
            var flag = reg.test(tel);
            if (flag) {
                // Yes, followed the rule
                document.getElementById("tel_err").style.display = 'none';

            } else {
                // No, not follow the rule, display the wrong input message
                document.getElementById("tel_err").style.display = '';
            }
            return flag;

        }


        //2.1 Get form list object

        var reg_form = document.getElementById("reg-form");

        // Tie the onsubmit case
        reg_form.onsubmit = function () {
            // check all form lists, whether all of them follow the requirement
            // if One did not follow the requirement, return false
            var flag = checkPassword() && checkTel() && checkUsername();
            alert(flag);
            return flag;
        }

    </script>
</body>

</html>